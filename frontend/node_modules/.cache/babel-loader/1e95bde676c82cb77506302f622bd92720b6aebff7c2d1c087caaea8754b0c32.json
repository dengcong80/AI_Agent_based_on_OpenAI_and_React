{"ast":null,"code":"// frontend/src/services/api.js\nimport axios from 'axios';\n\n// API foundation URL\nconst API_BASE_URL = process.env.REACT_APP_API_URL || 'http://localhost:5000/api';\n\n// create axios instance\nconst apiClient = axios.create({\n  baseURL: API_BASE_URL,\n  timeout: 60000,\n  headers: {\n    'Content-Type': 'application/json'\n  }\n});\n\n// request interceptor\napiClient.interceptors.request.use(config => {\n  return config;\n}, error => {\n  return Promise.reject(error);\n});\n\n// response interceptor\napiClient.interceptors.response.use(response => response.data, error => {\n  var _error$response, _error$response$data;\n  const message = ((_error$response = error.response) === null || _error$response === void 0 ? void 0 : (_error$response$data = _error$response.data) === null || _error$response$data === void 0 ? void 0 : _error$response$data.error) || error.message || 'request failed';\n  console.error('API Error:', message);\n  return Promise.reject(new Error(message));\n});\n\n// Chat API\n/**\r\n * send chat messages\r\n */\nexport const sendChatMessage = async (message, sessionId, options = {}) => {\n  return apiClient.post('/chat/message', {\n    message,\n    sessionId,\n    model: options.model,\n    temperature: options.temperature\n  });\n};\n\n/**\r\n * get history of chatting\r\n */\nexport const getChatHistory = async sessionId => {\n  return apiClient.get(`/chat/history/${sessionId}`);\n};\n\n/**\r\n * clear history of chat\r\n * \r\n */\nexport const clearChatHistory = async sessionId => {\n  return apiClient.delete(`/chat/history/${sessionId}`);\n};\n\n/**\r\n * get all sessions\r\n */\nexport const getAllSessions = async () => {\n  return apiClient.get('/chat/sessions');\n};\n\n// Knowledge API\n/**\r\n * upload documents to knowledge base\r\n * \r\n */\nexport const uploadDocuments = async documents => {\n  return apiClient.post('/knowledge/upload', {\n    documents\n  });\n};\n\n/**\r\n * search knowledge base\r\n */\nexport const searchKnowledge = async (query, topK = 5, filter = {}) => {\n  return apiClient.post('/knowledge/search', {\n    query,\n    topK,\n    filter\n  });\n};\n\n/**\r\n * delete documents\r\n */\nexport const deleteDocuments = async ids => {\n  return apiClient.delete('/knowledge/documents', {\n    data: {\n      ids\n    }\n  });\n};\n\n/**\r\n * get knowledge base stats\r\n */\nexport const getKnowledgeStats = async () => {\n  return apiClient.get('/knowledge/stats');\n};\n\n/**\r\n * batch to upload texts\r\n */\nexport const batchUploadText = async (text, metadata = {}, chunkSize = 1000) => {\n  return apiClient.post('/knowledge/batch-upload', {\n    text,\n    metadata,\n    chunkSize\n  });\n};\n\n/**\r\n * clear knowledge base\r\n */\nexport const clearKnowledge = async () => {\n  return apiClient.delete('/knowledge/clear');\n};\n\n// Agent API\n/**\r\n * create new Agent\r\n */\nexport const createAgent = async (agentType = 'default') => {\n  return apiClient.post('/agent/create', {\n    agentType\n  });\n};\n\n/**\r\n * Agent search\r\n */\nexport const agentQuery = async (query, agentId, options = {}) => {\n  return apiClient.post('/agent/query', {\n    query,\n    agentId,\n    agentType: options.agentType,\n    useKnowledgeBase: options.useKnowledgeBase !== false\n  });\n};\n\n/**\r\n * analysis intention\r\n */\nexport const analyzeIntent = async query => {\n  return apiClient.post('/agent/analyze-intent', {\n    query\n  });\n};\n\n/**\r\n * muti-step reasoning\r\n */\nexport const multiStepReasoning = async (task, steps, agentType = 'analytical') => {\n  return apiClient.post('/agent/multi-step', {\n    task,\n    steps,\n    agentType\n  });\n};\n\n/**\r\n * get Agent history\r\n */\nexport const getAgentHistory = async agentId => {\n  return apiClient.get(`/agent/history/${agentId}`);\n};\n\n/**\r\n * reset or delete Agent\r\n */\nexport const deleteAgent = async (agentId, action = 'reset') => {\n  return apiClient.delete(`/agent/${agentId}`, {\n    params: {\n      action\n    }\n  });\n};\n\n/**\r\n * get all Agent\r\n */\nexport const getAllAgents = async () => {\n  return apiClient.get('/agent/list');\n};\n\n// Health Check\nexport const healthCheck = async () => {\n  return axios.get(`${API_BASE_URL.replace('/api', '')}/health`);\n};\nexport default {\n  //chat\n  sendChatMessage,\n  getChatHistory,\n  clearChatHistory,\n  getAllSessions,\n  // Knowledge\n  uploadDocuments,\n  searchKnowledge,\n  deleteDocuments,\n  getKnowledgeStats,\n  batchUploadText,\n  clearKnowledge,\n  // Agent\n  createAgent,\n  agentQuery,\n  analyzeIntent,\n  multiStepReasoning,\n  getAgentHistory,\n  deleteAgent,\n  getAllAgents,\n  // health\n  healthCheck\n};","map":{"version":3,"names":["axios","API_BASE_URL","process","env","REACT_APP_API_URL","apiClient","create","baseURL","timeout","headers","interceptors","request","use","config","error","Promise","reject","response","data","_error$response","_error$response$data","message","console","Error","sendChatMessage","sessionId","options","post","model","temperature","getChatHistory","get","clearChatHistory","delete","getAllSessions","uploadDocuments","documents","searchKnowledge","query","topK","filter","deleteDocuments","ids","getKnowledgeStats","batchUploadText","text","metadata","chunkSize","clearKnowledge","createAgent","agentType","agentQuery","agentId","useKnowledgeBase","analyzeIntent","multiStepReasoning","task","steps","getAgentHistory","deleteAgent","action","params","getAllAgents","healthCheck","replace"],"sources":["C:/Users/dengc/Desktop/cs/AI_Agent_based_on_OpenAI_and_React/frontend/src/services/api.js"],"sourcesContent":["// frontend/src/services/api.js\r\nimport axios from 'axios';\r\n\r\n// API foundation URL\r\nconst API_BASE_URL = process.env.REACT_APP_API_URL || 'http://localhost:5000/api';\r\n\r\n// create axios instance\r\nconst apiClient = axios.create({\r\n    baseURL: API_BASE_URL,\r\n    timeout:60000,\r\n    headers:{\r\n        'Content-Type':'application/json'\r\n    }\r\n});\r\n\r\n// request interceptor\r\napiClient.interceptors.request.use(\r\n    (config)=>{\r\n        return config;\r\n    },\r\n    (error)=>{\r\n        return Promise.reject(error);\r\n    }\r\n);\r\n\r\n// response interceptor\r\napiClient.interceptors.response.use(\r\n    (response)=>response.data,\r\n    (error)=>{\r\n        const message = error.response?.data?.error||error.message||'request failed';\r\n        console.error('API Error:',message);\r\n        return Promise.reject(new Error(message));\r\n    }\r\n);\r\n\r\n\r\n// Chat API\r\n/**\r\n * send chat messages\r\n */\r\nexport const sendChatMessage = async(message,sessionId,options={})=>{\r\n    return apiClient.post('/chat/message',{\r\n        message,\r\n        sessionId,\r\n        model:options.model,\r\n        temperature:options.temperature\r\n    });\r\n};\r\n\r\n/**\r\n * get history of chatting\r\n */\r\nexport const getChatHistory = async (sessionId)=>{\r\n    return apiClient.get(`/chat/history/${sessionId}`);\r\n};\r\n\r\n/**\r\n * clear history of chat\r\n * \r\n */\r\nexport const clearChatHistory = async (sessionId) =>{\r\n  return apiClient.delete(`/chat/history/${sessionId}`);\r\n};\r\n\r\n/**\r\n * get all sessions\r\n */\r\nexport const getAllSessions = async()=>{\r\n    return apiClient.get('/chat/sessions');\r\n};\r\n\r\n// Knowledge API\r\n/**\r\n * upload documents to knowledge base\r\n * \r\n */\r\nexport const uploadDocuments= async(documents)=>{\r\n    return apiClient.post('/knowledge/upload',{documents});\r\n};\r\n\r\n/**\r\n * search knowledge base\r\n */\r\nexport const searchKnowledge = async (query, topK=5, filter = {})=>{\r\n    return apiClient.post('/knowledge/search',{query,topK,filter});\r\n};\r\n\r\n/**\r\n * delete documents\r\n */\r\nexport const deleteDocuments = async(ids)=>{\r\n  return apiClient.delete('/knowledge/documents',{data:{ids}});\r\n};\r\n\r\n/**\r\n * get knowledge base stats\r\n */\r\nexport const getKnowledgeStats = async()=>{\r\n    return apiClient.get('/knowledge/stats');\r\n};\r\n\r\n/**\r\n * batch to upload texts\r\n */\r\nexport const batchUploadText = async(text,metadata={},chunkSize=1000)=>{\r\n    return apiClient.post('/knowledge/batch-upload',{\r\n        text,\r\n        metadata,\r\n        chunkSize\r\n    });\r\n};\r\n\r\n/**\r\n * clear knowledge base\r\n */\r\nexport const clearKnowledge = async()=>{\r\n    return apiClient.delete('/knowledge/clear');\r\n};\r\n\r\n// Agent API\r\n/**\r\n * create new Agent\r\n */\r\nexport const createAgent = async(agentType='default')=>{\r\n    return apiClient.post('/agent/create',{agentType});\r\n};\r\n\r\n/**\r\n * Agent search\r\n */\r\nexport const agentQuery = async (query,agentId,options={})=>{\r\n    return apiClient.post('/agent/query',{\r\n        query,\r\n        agentId,\r\n        agentType:options.agentType,\r\n        useKnowledgeBase: options.useKnowledgeBase !== false\r\n    });\r\n};\r\n\r\n/**\r\n * analysis intention\r\n */\r\nexport const analyzeIntent = async(query)=>{\r\n    return apiClient.post('/agent/analyze-intent',{query});\r\n};\r\n\r\n/**\r\n * muti-step reasoning\r\n */\r\nexport const multiStepReasoning = async (task,steps,agentType='analytical')=>{\r\n    return apiClient.post('/agent/multi-step',{\r\n        task,\r\n        steps,\r\n        agentType\r\n    });\r\n};\r\n\r\n/**\r\n * get Agent history\r\n */\r\nexport const getAgentHistory = async(agentId)=>{\r\n    return apiClient.get(`/agent/history/${agentId}`);\r\n};\r\n\r\n/**\r\n * reset or delete Agent\r\n */\r\nexport const deleteAgent = async (agentId,action='reset')=>{\r\n    return apiClient.delete(`/agent/${agentId}`,{\r\n        params:{action}\r\n    });\r\n};\r\n\r\n/**\r\n * get all Agent\r\n */\r\nexport const getAllAgents = async()=>{\r\n    return apiClient.get('/agent/list');\r\n};\r\n\r\n// Health Check\r\nexport const healthCheck = async ()=>{\r\n    return axios.get(`${API_BASE_URL.replace('/api','')}/health`);\r\n};\r\n\r\nexport default{\r\n    //chat\r\n    sendChatMessage,\r\n    getChatHistory,\r\n    clearChatHistory,\r\n    getAllSessions,\r\n\r\n    // Knowledge\r\n    uploadDocuments,\r\n    searchKnowledge,\r\n    deleteDocuments,\r\n    getKnowledgeStats,\r\n    batchUploadText,\r\n    clearKnowledge,\r\n\r\n    // Agent\r\n    createAgent,\r\n    agentQuery,\r\n    analyzeIntent,\r\n    multiStepReasoning,\r\n    getAgentHistory,\r\n    deleteAgent,\r\n    getAllAgents,\r\n\r\n    // health\r\n    healthCheck\r\n};\r\n\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}